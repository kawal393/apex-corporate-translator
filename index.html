<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>APEX Corporate Translator</title>
  <meta name="description" content="APEX Corporate Translator — paste corporate emails/Slack/HR updates and get a 5-bullet verdict with status + confidence." />

  <style>
    :root{
      --bg:#070b12;
      --card:#0c1220;
      --card2:#0a1020;
      --stroke:rgba(255,255,255,.08);
      --stroke2:rgba(255,255,255,.12);
      --text:rgba(255,255,255,.92);
      --muted:rgba(255,255,255,.62);
      --muted2:rgba(255,255,255,.44);
      --blue:#3b82f6;
      --blue2:#2563eb;
      --shadow: 0 24px 80px rgba(0,0,0,.55);
      --radius: 22px;
    }

    *{box-sizing:border-box}
    body{
      margin:0;
      background: radial-gradient(1200px 800px at 20% 10%, rgba(59,130,246,.18), transparent 55%),
                  radial-gradient(900px 700px at 80% 20%, rgba(99,102,241,.14), transparent 50%),
                  var(--bg);
      color:var(--text);
      font-family: -apple-system,BlinkMacSystemFont,Segoe UI,Roboto,Inter,Helvetica,Arial,sans-serif;
      min-height:100vh;
      display:flex;
      justify-content:center;
      padding:28px 14px 60px;
    }

    .wrap{width:100%; max-width:820px;}
    .top{
      background: linear-gradient(180deg, rgba(255,255,255,.05), rgba(255,255,255,.02));
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }

    .hero{
      padding:26px 22px 18px;
      display:flex;
      gap:18px;
      align-items:flex-start;
      justify-content:space-between;
    }

    .brand{
      display:flex;
      flex-direction:column;
      gap:10px;
    }
    .h1{
      font-size: 44px;
      letter-spacing:-1px;
      line-height:1.02;
      margin:0;
      font-weight:800;
    }
    .sub{
      margin:0;
      max-width: 54ch;
      color:var(--muted);
      line-height:1.55;
      font-size:15.5px;
    }

    .pill{
      align-self:flex-start;
      font-size:12px;
      color:rgba(255,255,255,.80);
      border:1px solid var(--stroke2);
      padding:8px 12px;
      border-radius:999px;
      background: rgba(255,255,255,.04);
      backdrop-filter: blur(10px);
      white-space:nowrap;
    }

    .panel{
      padding:18px 22px 22px;
      border-top:1px solid var(--stroke);
      background: rgba(0,0,0,.10);
    }

    textarea{
      width:100%;
      min-height:220px;
      resize:vertical;
      background: rgba(0,0,0,.25);
      color:var(--text);
      border:1px solid var(--stroke);
      border-radius: 18px;
      padding:16px 16px;
      font-size:15px;
      line-height:1.55;
      outline:none;
    }
    textarea::placeholder{color:rgba(255,255,255,.35)}
    textarea:focus{border-color: rgba(59,130,246,.45); box-shadow: 0 0 0 4px rgba(59,130,246,.14);}

    .btnrow{
      display:flex;
      gap:12px;
      margin-top:14px;
      flex-wrap:wrap;
    }
    button{
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color:var(--text);
      padding:12px 14px;
      border-radius: 14px;
      font-weight:700;
      cursor:pointer;
      font-size:14px;
    }
    button.primary{
      background: linear-gradient(180deg, rgba(59,130,246,1), rgba(37,99,235,1));
      border:1px solid rgba(255,255,255,.10);
      flex:1 1 220px;
      padding:14px 16px;
      font-size:15px;
    }
    button.primary:hover{filter:brightness(1.05)}
    button:hover{border-color:rgba(255,255,255,.18)}
    button:active{transform: translateY(1px)}
    .mini{flex: 1 1 160px;}
    .small{flex: 1 1 140px;}

    .out{
      margin-top:18px;
      padding:18px;
      border-radius: 18px;
      border:1px solid var(--stroke);
      background: linear-gradient(180deg, rgba(255,255,255,.03), rgba(255,255,255,.02));
    }

    .outhead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:10px;
      margin-bottom:12px;
    }
    .outtitle{
      display:flex;
      align-items:center;
      gap:10px;
      font-weight:800;
      letter-spacing:.18em;
      font-size:12px;
      color:rgba(255,255,255,.72);
    }

    .cards{
      display:grid;
      grid-template-columns: repeat(3, minmax(0, 1fr));
      gap:12px;
      margin-bottom:12px;
    }
    .card{
      background: rgba(0,0,0,.18);
      border:1px solid var(--stroke);
      border-radius: 16px;
      padding:14px 14px;
      min-height:74px;
    }
    .label{
      font-size:12px;
      color:rgba(255,255,255,.55);
      margin-bottom:8px;
      letter-spacing:.06em;
      text-transform:uppercase;
    }
    .value{
      font-size:18px;
      font-weight:900;
      letter-spacing:-.02em;
    }
    .dot{
      display:inline-block;
      width:10px; height:10px;
      border-radius:99px;
      margin-right:8px;
      vertical-align:middle;
      background: rgba(255,255,255,.20);
      box-shadow: 0 0 0 4px rgba(255,255,255,.06);
    }

    .alert{
      border:1px solid var(--stroke);
      border-radius: 16px;
      padding:12px 14px;
      background: rgba(0,0,0,.20);
      margin-bottom:12px;
      line-height:1.45;
    }
    .alert strong{font-weight:900}
    .alert .muted{color:var(--muted)}
    .verdict{
      margin-top:10px;
      padding:14px 14px;
      border:1px solid var(--stroke);
      border-radius: 16px;
      background: rgba(0,0,0,.16);
    }
    ul{
      margin:0;
      padding-left:18px;
      color:rgba(255,255,255,.86);
      line-height:1.55;
      font-size:14.5px;
    }
    li{margin:10px 0}
    .tip{
      margin-top:14px;
      color:var(--muted2);
      font-size:12.8px;
      line-height:1.5;
    }
    .tip a{color: rgba(59,130,246,.95); text-decoration:none}
    .tip a:hover{text-decoration:underline}

    @media (max-width: 740px){
      .h1{font-size:38px}
      .cards{grid-template-columns: 1fr;}
      button.primary{flex: 1 1 100%}
      .mini,.small{flex: 1 1 calc(50% - 6px)}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <div class="top">
      <div class="hero">
        <div class="brand">
          <h1 class="h1">APEX<br/>Corporate Translator</h1>
          <p class="sub">Paste any corporate email / Slack / HR update. Get an <b>APEX verdict in exactly 5 bullets</b> with status + confidence.</p>
        </div>
        <div class="pill">APEX · Verdict Engine</div>
      </div>

      <div class="panel">
        <textarea id="input" placeholder="Paste corporate message here… (email / Slack / HR update)"></textarea>

        <div class="btnrow">
          <button class="primary" id="btnTranslate">APEX Translate</button>
          <button class="mini" id="btnExample">Load APEX Example</button>
          <button class="small" id="btnCopy">Copy Verdict</button>
          <button class="small" id="btnReset">Reset</button>
        </div>

        <div class="out" id="output">
          <div class="outhead">
            <div class="outtitle">APEX OUTPUT</div>
            <div style="color:rgba(255,255,255,.40); font-size:12px">—</div>
          </div>

          <div class="cards">
            <div class="card">
              <div class="label">APEX Status</div>
              <div class="value"><span class="dot" id="dotStatus"></span><span id="status">—</span></div>
            </div>
            <div class="card">
              <div class="label">APEX Confidence</div>
              <div class="value" id="confidence">—</div>
            </div>
            <div class="card">
              <div class="label">APEX Signals</div>
              <div class="value" id="signals">—</div>
            </div>
          </div>

          <div class="alert" id="alertBox">
            <strong>APEX ALERT</strong> <span class="muted">— Paste a message and run APEX Translate.</span>
          </div>

          <div class="verdict">
            <div class="label" style="margin-bottom:10px">APEX Verdict (exactly 5 bullets)</div>
            <ul id="verdictList">
              <li>—</li>
            </ul>
          </div>

          <div class="tip">
            Tip: corporate emails often hide the real move behind “alignment”, “streamline”, “flexibility”.<br/>
            <a href="#" id="useExampleLink">Use example</a>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/* =========================
   APEX Corporate Translator
   - Exactly 5 bullets, always
   - No user-facing “flags/weights”
   - Clean APEX ALERT summary
   ========================= */

const APEX_RULES = [
  { key:"layoff", weight:5, phrases:["reduction in force","rif","position eliminated","role impacted","role elimination","headcount reduction","workforce reduction","separation","redundancy","redundancies"] },
  { key:"reorg",  weight:4, phrases:["organizational adjustments","operating model","restructure","restructuring","realignment","reorg","org changes","reporting-line changes","new reporting line","new structure"] },
  { key:"cuts",   weight:4, phrases:["streamline","efficiency","cost optimization","optimize costs","rightsizing","runway","expense control","margin improvement"] },
  { key:"freeze", weight:3, phrases:["hiring freeze","pause hiring","backfill approval","travel freeze","spend freeze","budget freeze"] },
  { key:"urgency",weight:2, phrases:["effective immediately","coming weeks","as soon as possible","near-term","short-term flexibility","rapidly evolving","dynamic market"] },
  { key:"vague",  weight:2, phrases:["additional details will be shared","more information to follow","as they become available","leaders are evaluating","we are assessing","ongoing review"] },
  { key:"pressure",weight:2,phrases:["macroeconomic","market headwinds","challenging environment","uncertainty","competitive landscape","demand softness"] },
  { key:"control",weight:1, phrases:["thank you for your adaptability","we appreciate your commitment","alignment with priorities","strategic priorities"] }
];

const EXAMPLE_TEXT =
`Subject: Important Update on Our Operating Model

Team,

As we navigate a dynamic market environment, leadership has been evaluating opportunities to better align our resources with long-term strategic priorities.

Over the coming weeks, we will be implementing organizational adjustments designed to streamline workflows and improve cross-functional collaboration.

While these changes may require some short-term flexibility, we are confident they will position us strongly for sustainable growth. Additional details will be shared by your managers as they become available.

Thank you for your continued commitment and adaptability.

Best regards,
Senior Leadership Team`;

const els = {
  input: document.getElementById("input"),
  status: document.getElementById("status"),
  confidence: document.getElementById("confidence"),
  signals: document.getElementById("signals"),
  dotStatus: document.getElementById("dotStatus"),
  verdictList: document.getElementById("verdictList"),
  alertBox: document.getElementById("alertBox"),
  btnTranslate: document.getElementById("btnTranslate"),
  btnExample: document.getElementById("btnExample"),
  btnCopy: document.getElementById("btnCopy"),
  btnReset: document.getElementById("btnReset"),
  useExampleLink: document.getElementById("useExampleLink")
};

function normalize(s){
  return (s || "")
    .toLowerCase()
    .replace(/\s+/g," ")
    .trim();
}

function scoreText(text){
  const t = normalize(text);
  let signals = [];
  let score = 0;

  for (const rule of APEX_RULES){
    for (const p of rule.phrases){
      if (t.includes(p)){
        signals.push({ phrase:p, weight:rule.weight, key:rule.key });
        score += rule.weight;
      }
    }
  }
  // dedupe by phrase
  const seen = new Set();
  signals = signals.filter(x => {
    if (seen.has(x.phrase)) return false;
    seen.add(x.phrase);
    return true;
  });

  return { score, signals };
}

function classify(score, signalCount){
  // tuned for corporate comms: more signals => higher confidence
  let status = "WATCH";
  if (score >= 16) status = "CRITICAL";
  else if (score >= 9) status = "HIGH";
  else if (score >= 5) status = "ELEVATED";

  let confidence = "Medium";
  if (signalCount >= 8 || score >= 16) confidence = "High";
  else if (signalCount <= 2 && score < 6) confidence = "Low";

  return { status, confidence };
}

function statusColor(status){
  if (status === "CRITICAL") return "#ef4444";
  if (status === "HIGH") return "#f59e0b";
  if (status === "ELEVATED") return "#60a5fa";
  return "rgba(255,255,255,.25)";
}

function extractSubject(raw){
  const m = raw.match(/^\s*subject\s*:\s*(.+)$/im);
  return m ? m[1].trim().slice(0,120) : "";
}

function build5Bullets(raw, status, confidence, score, signalCount){
  // Exactly 5 bullets. Always.
  const subject = extractSubject(raw);
  const t = normalize(raw);

  // Core move inference
  let coreMove = "internal process/priority shift";
  if (t.includes("hiring freeze") || t.includes("pause hiring") || t.includes("budget freeze")) coreMove = "cost control / freezes";
  if (t.includes("restructure") || t.includes("restructuring") || t.includes("operating model") || t.includes("organizational adjustments") || t.includes("reporting-line")) coreMove = "reorg / reporting-line changes";
  if (t.includes("reduction in force") || t.includes("position eliminated") || t.includes("headcount reduction") || t.includes("redundancy")) coreMove = "headcount reduction risk";

  // Next step inference
  let nextStep = "manager meetings + scope clarification requests";
  if (status === "CRITICAL" || status === "HIGH") nextStep = "manager-led meetings + role mapping; decisions lock fast";

  // Impact inference
  let impact = "workflow disruption + ambiguity first; clarity later";
  if (coreMove.includes("headcount")) impact = "possible role impact; start documenting + preparing";

  // Action inference
  let action = "ask 3 specifics: scope change, reporting line, and timeline for role impact";
  if (status === "CRITICAL") action = "ask 3 specifics today + update your evidence trail (emails, notes, dates)";

  // Headline bullet
  const headline = subject
    ? `Headline: “${subject}” = a change signal; expect ownership/workflow shifts.`
    : `Headline: This message is a change signal; expect ownership/workflow shifts.`;

  // Timeline bullet (short, urgent)
  let timeline = `Timing: language like “coming weeks” usually means changes start now and lock in within 2–6 weeks.`;
  if (!t.includes("coming weeks") && (status === "CRITICAL" || status === "HIGH")) {
    timeline = `Timing: high-signal announcements usually precede concrete changes within 2–6 weeks.`;
  }

  // Keep them short and punchy; exactly 5.
  return [
    headline,
    `Core move: translation → ${coreMove}.`,
    `Next step: ${nextStep}.`,
    `Impact: ${impact}.`,
    `APEX move: ${action}. ${timeline}`
  ];
}

function buildAlert(status, confidence, score, signalCount){
  // One-line protective framing
  let translation = "Low risk / likely informational.";
  if (status === "ELEVATED") translation = "Change likely. Expect some disruption.";
  if (status === "HIGH") translation = "High change risk. Reorg / freezes likely soon.";
  if (status === "CRITICAL") translation = "Major change risk. Reorg and/or role impact possible. Act now.";

  return `Status: ${status} · Confidence: ${confidence} · Signals: ${signalCount} (score ${score}) — ${translation}`;
}

function renderVerdict(bullets){
  // Force exactly 5 items
  const five = bullets.slice(0,5);
  els.verdictList.innerHTML = five.map(b => `<li>${escapeHtml(b)}</li>`).join("");
}

function escapeHtml(str){
  return String(str)
    .replaceAll("&","&amp;")
    .replaceAll("<","&lt;")
    .replaceAll(">","&gt;")
    .replaceAll('"',"&quot;")
    .replaceAll("'","&#039;");
}

function translate(){
  const raw = els.input.value || "";
  if (!raw.trim()){
    return;
  }
  const { score, signals } = scoreText(raw);
  const { status, confidence } = classify(score, signals.length);

  // Top cards
  els.status.textContent = status;
  els.confidence.textContent = confidence;
  els.signals.textContent = `${signals.length} (score ${score})`;
  els.dotStatus.style.background = statusColor(status);
  els.dotStatus.style.boxShadow = `0 0 0 4px rgba(255,255,255,.06), 0 0 18px ${statusColor(status)}55`;

  // Alert
  els.alertBox.innerHTML = `<strong>APEX ALERT</strong> <span class="muted">— ${escapeHtml(buildAlert(status, confidence, score, signals.length))}</span>`;

  // Exactly 5 bullets
  const bullets = build5Bullets(raw, status, confidence, score, signals.length);
  renderVerdict(bullets);
}

function loadExample(){
  els.input.value = EXAMPLE_TEXT;
  window.scrollTo({ top: 0, behavior: "smooth" });
}

function resetAll(){
  els.input.value = "";
  els.status.textContent = "—";
  els.confidence.textContent = "—";
  els.signals.textContent = "—";
  els.dotStatus.style.background = "rgba(255,255,255,.20)";
  els.dotStatus.style.boxShadow = "0 0 0 4px rgba(255,255,255,.06)";
  els.alertBox.innerHTML = `<strong>APEX ALERT</strong> <span class="muted">— Paste a message and run APEX Translate.</span>`;
  els.verdictList.innerHTML = `<li>—</li>`;
}

async function copyVerdict(){
  const items = Array.from(els.verdictList.querySelectorAll("li")).map(li => li.innerText.trim()).filter(Boolean);
  const status = els.status.textContent;
  const confidence = els.confidence.textContent;
  const signals = els.signals.textContent;

  const text =
`APEX Corporate Translator — Verdict
Status: ${status}
Confidence: ${confidence}
Signals: ${signals}

- ${items.join("\n- ")}`;

  try{
    await navigator.clipboard.writeText(text);
    els.btnCopy.textContent = "Copied ✓";
    setTimeout(()=> els.btnCopy.textContent = "Copy Verdict", 1200);
  }catch(e){
    // fallback
    prompt("Copy this:", text);
  }
}

els.btnTranslate.addEventListener("click", translate);
els.btnExample.addEventListener("click", loadExample);
els.btnReset.addEventListener("click", resetAll);
els.btnCopy.addEventListener("click", copyVerdict);
els.useExampleLink.addEventListener("click", (e)=>{ e.preventDefault(); loadExample(); });

</script>
</body>
</html>
