<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <title>APEX Corporate Translator</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <meta name="description" content="APEX Corporate Translator — decode corporate language into a 5–10 point verdict."/>
  <style>
    :root{
      --bg:#0b0f14; --panel:#121826; --ink:#eaeaea; --muted:rgba(234,234,234,.72);
      --line:rgba(255,255,255,.10); --blue:#4f8cff; --blue2:#3b74d9; --gold:#d8b25a;
      --bad:#ff5b5b; --warn:#ffcc66; --good:#6ee7a8;
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:-apple-system,BlinkMacSystemFont,"Segoe UI",Roboto,sans-serif;
      background: radial-gradient(900px 500px at 20% 0%, rgba(79,140,255,.18), transparent 55%),
                  radial-gradient(900px 500px at 80% 20%, rgba(216,178,90,.12), transparent 55%),
                  var(--bg);
      color:var(--ink);
      min-height:100vh;
      display:flex; justify-content:center; align-items:flex-start;
      padding:22px;
    }
    .box{
      width:min(760px, 100%);
      background: linear-gradient(180deg, rgba(18,24,38,.92), rgba(18,24,38,.84));
      border:1px solid var(--line);
      border-radius:18px;
      box-shadow: 0 0 60px rgba(0,0,0,.45);
      padding:22px;
    }
    .top{
      display:flex; align-items:flex-start; justify-content:space-between; gap:12px;
      margin-bottom:10px;
    }
    h1{margin:0; font-size:30px; letter-spacing:-.6px}
    .sub{margin:6px 0 0; color:var(--muted); line-height:1.5}
    .badge{
      border:1px solid var(--line);
      padding:8px 10px;
      border-radius:999px;
      font-size:12px;
      color:var(--muted);
      white-space:nowrap;
    }
    textarea{
      width:100%;
      min-height:190px;
      margin-top:14px;
      padding:14px;
      border-radius:14px;
      border:1px solid var(--line);
      background: rgba(11,15,20,.85);
      color:var(--ink);
      font-size:15px;
      outline:none;
    }
    textarea:focus{
      border-color: rgba(216,178,90,.55);
      box-shadow: 0 0 0 2px rgba(216,178,90,.15);
    }
    .row{
      display:flex; gap:10px; margin-top:12px; flex-wrap:wrap;
    }
    button{
      flex:1;
      min-width:180px;
      padding:14px;
      border-radius:14px;
      border:1px solid rgba(79,140,255,.35);
      font-size:16px;
      font-weight:700;
      background: linear-gradient(180deg, var(--blue), var(--blue2));
      color:white;
      cursor:pointer;
    }
    button.secondary{
      background: transparent;
      color: var(--ink);
      border:1px solid var(--line);
      font-weight:600;
    }
    button:active{transform: translateY(1px);}
    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap:12px;
      margin-top:14px;
    }
    .card{
      border:1px solid var(--line);
      background: rgba(11,15,20,.55);
      border-radius:16px;
      padding:14px;
    }
    .kpi{
      display:grid;
      grid-template-columns: repeat(3, 1fr);
      gap:10px;
    }
    .kpi .mini{
      border:1px solid var(--line);
      border-radius:14px;
      padding:12px;
      background: rgba(18,24,38,.35);
    }
    .label{font-size:12px; color:var(--muted); margin-bottom:6px}
    .value{font-size:16px; font-weight:800}
    .statusDot{
      display:inline-block; width:10px; height:10px; border-radius:99px; margin-right:8px;
      vertical-align:middle;
    }
    ul{margin:8px 0 0; padding-left:18px}
    li{margin:7px 0; line-height:1.45; color:rgba(234,234,234,.92)}
    .small{font-size:12px; color:var(--muted); line-height:1.45}
    .footer{
      margin-top:12px; padding-top:12px; border-top:1px solid var(--line);
      display:flex; justify-content:space-between; gap:10px; flex-wrap:wrap;
      color:var(--muted); font-size:12px;
    }
    a{color:rgba(216,178,90,.95); text-decoration:none}
  </style>
</head>
<body>
  <div class="box">
    <div class="top">
      <div>
        <h1>APEX Corporate Translator</h1>
        <p class="sub">Paste any corporate message. Get an APEX verdict in <b>5–10 points</b> with status + confidence.</p>
      </div>
      <div class="badge">APEX · Verdict Engine</div>
    </div>

    <textarea id="input" placeholder="Paste corporate email / Slack post / HR update here..."></textarea>

    <div class="row">
      <button onclick="apexTranslate()">APEX Translate</button>
      <button class="secondary" onclick="fillExample()">Load APEX Example</button>
      <button class="secondary" onclick="copyVerdict()">Copy Verdict</button>
      <button class="secondary" onclick="resetAll()">Reset</button>
    </div>

    <div class="grid">
      <div class="card">
        <div class="kpi">
          <div class="mini">
            <div class="label">APEX Status</div>
            <div class="value" id="statusValue"><span class="statusDot" style="background:rgba(255,255,255,.25)"></span>—</div>
          </div>
          <div class="mini">
            <div class="label">APEX Confidence</div>
            <div class="value" id="confidenceValue">—</div>
          </div>
          <div class="mini">
            <div class="label">APEX Signals</div>
            <div class="value" id="signalsValue">—</div>
          </div>
        </div>
      </div>

      <div class="card">
        <div class="label">APEX Verdict (5–10 points)</div>
        <div id="verdict"></div>
      </div>

      <div class="card">
        <div class="label">APEX Flags (detected phrases)</div>
        <div class="small" id="flags">—</div>
      </div>

      <div class="footer">
        <div>Tip: corporate emails often hide the real move behind “alignment”, “streamline”, “flexibility”.</div>
        <div><a href="#" onclick="fillExample();return false;">Use example</a></div>
      </div>
    </div>
  </div>

<script>
  const LEXICON = [
    // Layoff / cost-cut / reorg
    {k:"dynamic market", w:2, t:"Pressure signal: business conditions are stressed."},
    {k:"align our resources", w:3, t:"Translation: budget / headcount will be reallocated (some teams lose)."},
    {k:"strategic priorities", w:2, t:"Translation: leadership is choosing winners/losers internally."},
    {k:"organizational adjustments", w:4, t:"Translation: restructure / reporting-line changes (possible role cuts)."},
    {k:"streamline", w:4, t:"Translation: remove steps and/or people (efficiency drive)."},
    {k:"efficiency", w:3, t:"Translation: do more with less; cost controls tighten."},
    {k:"rightsizing", w:6, t:"Translation: layoffs."},
    {k:"restructure", w:5, t:"Translation: layoffs or major role changes."},
    {k:"operating model", w:4, t:"Translation: your team’s shape and scope is changing."},
    {k:"headcount", w:5, t:"Translation: hiring freeze or reductions."},
    {k:"hiring freeze", w:6, t:"Translation: no new hires; backfills blocked."},

    // Ambiguity / control
    {k:"over the coming weeks", w:2, t:"Translation: uncertainty window — details intentionally delayed."},
    {k:"short-term flexibility", w:3, t:"Translation: extra workload, schedule shifts, or new responsibilities."},
    {k:"additional details will be shared", w:3, t:"Translation: you don’t get specifics now; managers will manage reactions."},
    {k:"as they become available", w:2, t:"Translation: timeline is fluid; expect changes without notice."},
    {k:"thank you for your continued commitment", w:1, t:"Translation: brace for inconvenience; morale management line."},
    {k:"adaptability", w:2, t:"Translation: you will be asked to accept changes quickly."}
  ];

  function normalize(s){
    return (s || "")
      .toLowerCase()
      .replace(/\s+/g, " ")
      .trim();
  }

  function extractSubject(raw){
    const m = raw.match(/subject:\s*(.*)/i);
    if(!m) return "";
    return (m[1] || "").split("\n")[0].trim();
  }

  function statusFromScore(score){
    // 0–4: CLEAR, 5–10: WATCH, 11–17: HIGH RISK, 18+: CRITICAL
    if(score >= 18) return {name:"CRITICAL", dot:"var(--bad)", conf:"High"};
    if(score >= 11) return {name:"HIGH RISK", dot:"var(--warn)", conf:"High"};
    if(score >= 5)  return {name:"WATCH", dot:"var(--warn)", conf:"Medium"};
    return {name:"CLEAR", dot:"var(--good)", conf:"Low"};
  }

  function buildVerdictPoints(subject, hits){
    // Always output 5–10 points
    const points = [];

    // 1) headline
    if(subject){
      points.push(`Headline: "${subject}" is a change signal — expect workflow and ownership shifts.`);
    } else {
      points.push(`Headline: This message is a change signal — expect workflow and ownership shifts.`);
    }

    // 2) core move (based on strongest hits)
    const sorted = [...hits].sort((a,b)=>b.w-a.w);
    if(sorted[0]){
      points.push(`Core move: ${sorted[0].t}`);
    } else {
      points.push(`Core move: Leadership is repositioning teams; details are intentionally vague.`);
    }

    // 3) what will happen next
    points.push(`Next likely step: manager-led meetings, role mapping, new processes, and shifting priorities.`);

    // 4) what it means for staff
    points.push(`Impact on people: increased load + ambiguity first; clarity comes after decisions are locked.`);

    // 5) what to watch (top 3 flags)
    const topFlags = sorted.slice(0,3).map(x=>`"${x.k}"`).join(", ");
    if(topFlags){
      points.push(`Watch phrases: ${topFlags} — these usually precede cuts, freezes, or reorganizations.`);
    } else {
      points.push(`Watch phrases: “alignment”, “streamline”, “flexibility”, “operating model”.`);
    }

    // 6) timeline
    points.push(`Timeline: “coming weeks” usually means changes begin immediately and finalize in 2–6 weeks.`);

    // 7) personal action
    points.push(`APEX move: ask your manager 3 specifics — scope change, reporting line, and timeline for role impact.`);

    // 8) risk call (if high score)
    const score = hits.reduce((s,x)=>s+x.w,0);
    if(score >= 11){
      points.push(`Risk call: treat this as a potential reduction/reorg until proven otherwise.`);
    }

    // Trim to max 10
    return points.slice(0,10);
  }

  function apexTranslate(){
    const raw = document.getElementById("input").value || "";
    const text = normalize(raw);
    if(!text){
      alert("Paste a corporate message first.");
      return;
    }

    const subject = extractSubject(raw);
    const hits = [];
    let score = 0;

    for(const item of LEXICON){
      if(text.includes(item.k)){
        hits.push(item);
        score += item.w;
      }
    }

    const st = statusFromScore(score);
    const points = buildVerdictPoints(subject, hits);

    // Render KPIs
    document.getElementById("statusValue").innerHTML =
      `<span class="statusDot" style="background:${st.dot}"></span>${st.name}`;
    document.getElementById("confidenceValue").textContent = st.conf;
    document.getElementById("signalsValue").textContent = `${hits.length} (score ${score})`;

    // Render bullets
    const ul = document.createElement("ul");
    points.forEach(p=>{
      const li = document.createElement("li");
      li.textContent = p;
      ul.appendChild(li);
    });

    const verdict = document.getElementById("verdict");
    verdict.innerHTML = "";
    verdict.appendChild(ul);

    // Flags
    if(hits.length){
      const flags = hits
        .sort((a,b)=>b.w-a.w)
        .map(x=>`• ${x.k} (weight ${x.w})`)
        .join("<br/>");
      document.getElementById("flags").innerHTML = flags;
    } else {
      document.getElementById("flags").textContent = "No known phrases detected. Try pasting the full email including HR/leadership language.";
    }
  }

  function fillExample(){
    document.getElementById("input").value =
`Subject: Important Update on Our Operating Model

Team,

As we navigate a dynamic market environment, we’ve been evaluating opportunities to better align our resources with long-term strategic priorities.

Over the coming weeks, we will be implementing organizational adjustments designed to streamline workflows and improve cross-functional collaboration.

While these changes may require some short-term flexibility, we are confident they will position us strongly for sustainable growth. Additional details will be shared by your managers as they become available.

Thank you for your continued commitment and adaptability.

Best regards,
Senior Leadership Team`;
    apexTranslate();
  }

  async function copyVerdict(){
    const status = document.getElementById("statusValue").textContent.trim();
    const conf = document.getElementById("confidenceValue").textContent.trim();
    const sig = document.getElementById("signalsValue").textContent.trim();
    const lis = Array.from(document.querySelectorAll("#verdict li")).map(li=>`- ${li.textContent}`);

    if(!lis.length){
      alert("Run APEX Translate first.");
      return;
    }

    const out =
`APEX Status: ${status}
APEX Confidence: ${conf}
APEX Signals: ${sig}

APEX Verdict:
${lis.join("\n")}`;

    await navigator.clipboard.writeText(out);
    alert("Copied APEX verdict.");
  }

  function resetAll(){
    document.getElementById("input").value = "";
    document.getElementById("statusValue").innerHTML = `<span class="statusDot" style="background:rgba(255,255,255,.25)"></span>—`;
    document.getElementById("confidenceValue").textContent = "—";
    document.getElementById("signalsValue").textContent = "—";
    document.getElementById("verdict").innerHTML = "";
    document.getElementById("flags").textContent = "—";
  }
</script>
</body>
</html>
