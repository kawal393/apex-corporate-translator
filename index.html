<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>APEX Corporate Translator</title>
  <meta name="description" content="Paste any corporate email / Slack / HR update. Get an APEX verdict in exactly 5 bullets with status + confidence.">
  <style>
    :root{
      --bg0:#070A10;
      --bg1:#0B1020;
      --card:#0E1426;
      --card2:#0C1222;
      --stroke:rgba(255,255,255,.09);
      --stroke2:rgba(255,255,255,.12);
      --text:#E9EEF9;
      --muted:rgba(233,238,249,.68);
      --muted2:rgba(233,238,249,.52);
      --blue:#2F7DFF;
      --blue2:#1F60FF;
      --good:#24D18F;
      --warn:#FFB020;
      --crit:#FF4D4D;
      --watch:#9CA6B7;
      --shadow: 0 24px 70px rgba(0,0,0,.55);
      --radius: 22px;
      --radius2: 18px;
      --mono: ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", "Courier New", monospace;
      --sans: ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Helvetica, Arial, "Apple Color Emoji","Segoe UI Emoji";
    }
    *{box-sizing:border-box}
    body{
      margin:0;
      font-family:var(--sans);
      color:var(--text);
      background:
        radial-gradient(1200px 600px at 22% 8%, rgba(47,125,255,.22), transparent 60%),
        radial-gradient(900px 500px at 80% 18%, rgba(255,77,77,.14), transparent 58%),
        radial-gradient(700px 420px at 50% 92%, rgba(36,209,143,.10), transparent 60%),
        linear-gradient(180deg, var(--bg1), var(--bg0));
      min-height:100vh;
      padding:28px 14px 40px;
    }
    .wrap{max-width:980px;margin:0 auto;}
    .hero{
      background: linear-gradient(135deg, rgba(255,255,255,.06), rgba(255,255,255,.02));
      border:1px solid var(--stroke);
      border-radius: var(--radius);
      box-shadow: var(--shadow);
      overflow:hidden;
    }
    .heroTop{
      padding:28px 24px 18px;
      display:flex;
      align-items:flex-start;
      gap:16px;
      justify-content:space-between;
    }
    .title{
      line-height:1.02;
      font-size: clamp(34px, 5vw, 54px);
      letter-spacing:-.02em;
      margin:0;
    }
    .subtitle{
      margin:10px 0 0;
      color:var(--muted);
      font-size: 15.5px;
      line-height:1.55;
      max-width: 580px;
    }
    .pill{
      flex:0 0 auto;
      border:1px solid var(--stroke);
      background:rgba(255,255,255,.03);
      padding:8px 12px;
      border-radius:999px;
      color:var(--muted);
      font-size:12.5px;
      letter-spacing:.03em;
      text-transform: none;
      margin-top: 6px;
      white-space:nowrap;
    }

    .panel{
      border-top:1px solid var(--stroke);
      padding:18px 24px 24px;
      background: linear-gradient(180deg, rgba(0,0,0,.06), rgba(0,0,0,.14));
    }

    .inputBox{
      background: rgba(0,0,0,.22);
      border:1px solid var(--stroke2);
      border-radius: var(--radius2);
      padding:14px;
      box-shadow: inset 0 0 0 1px rgba(255,255,255,.02);
    }
    textarea{
      width:100%;
      min-height: 150px;
      border:0;
      resize: vertical;
      outline:none;
      background: transparent;
      color: var(--text);
      font-family: var(--mono);
      font-size: 13.5px;
      line-height: 1.5;
      padding: 4px 2px;
    }
    textarea::placeholder{color: rgba(233,238,249,.35);}

    .btnRow{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr 1fr;
      gap:10px;
      margin-top: 14px;
    }
    .btn{
      border:1px solid var(--stroke);
      background: rgba(255,255,255,.04);
      color: var(--text);
      padding:12px 14px;
      border-radius: 14px;
      font-weight: 650;
      letter-spacing:.01em;
      cursor:pointer;
      transition: transform .06s ease, background .2s ease, border-color .2s ease;
      user-select:none;
    }
    .btn:active{transform: translateY(1px);}
    .btn:hover{border-color: rgba(255,255,255,.16); background: rgba(255,255,255,.06);}
    .btnPrimary{
      background: linear-gradient(180deg, var(--blue), var(--blue2));
      border-color: rgba(47,125,255,.55);
      box-shadow: 0 12px 32px rgba(47,125,255,.20);
    }
    .btnPrimary:hover{background: linear-gradient(180deg, #3A88FF, #2367FF);}

    .out{
      margin-top:16px;
      background: rgba(0,0,0,.20);
      border:1px solid var(--stroke);
      border-radius: var(--radius2);
      overflow:hidden;
    }
    .outHead{
      display:flex;
      align-items:center;
      justify-content:space-between;
      gap:12px;
      padding: 12px 14px;
      border-bottom: 1px solid var(--stroke);
      background: rgba(255,255,255,.03);
    }
    .outTitle{
      color: var(--muted);
      font-size: 12px;
      letter-spacing: .18em;
      text-transform: uppercase;
      font-weight: 800;
    }
    .mini{
      color: var(--muted2);
      font-size: 12px;
      font-family: var(--mono);
      user-select:none;
    }

    .cards{
      display:grid;
      grid-template-columns: 1fr 1fr 1fr;
      gap:10px;
      padding: 14px;
    }
    .card{
      background: rgba(255,255,255,.03);
      border: 1px solid var(--stroke);
      border-radius: 16px;
      padding: 12px;
      min-height: 84px;
    }
    .k{
      color: var(--muted2);
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      font-weight: 850;
      margin-bottom: 8px;
    }
    .v{
      display:flex;
      align-items:center;
      gap:10px;
      font-size: 18px;
      font-weight: 900;
      letter-spacing:.01em;
    }
    .dot{
      width:10px;height:10px;border-radius:999px;
      background: var(--watch);
      box-shadow: 0 0 0 6px rgba(255,255,255,.02);
      flex: 0 0 auto;
    }

    .alert{
      margin:0 14px 14px;
      background: rgba(255,255,255,.03);
      border:1px solid var(--stroke);
      border-radius: 16px;
      padding: 12px;
      color: var(--muted);
      line-height: 1.45;
      font-size: 13px;
    }
    .alert strong{color:var(--text)}

    .verdict{
      margin: 0 14px 16px;
      background: rgba(255,255,255,.03);
      border:1px solid var(--stroke);
      border-radius: 16px;
      padding: 12px 12px 10px;
    }
    .verdictHead{
      color: var(--muted2);
      font-size: 11px;
      letter-spacing: .18em;
      text-transform: uppercase;
      font-weight: 900;
      margin-bottom: 8px;
    }
    ul{
      margin: 0;
      padding-left: 18px;
      color: var(--text);
      line-height:1.55;
      font-size: 13.5px;
    }
    li{margin: 8px 0;}
    li span{color: var(--muted);}

    .tip{
      margin: 0 14px 16px;
      color: rgba(233,238,249,.40);
      font-size: 12px;
      line-height:1.4;
    }
    .tip a{
      color: rgba(47,125,255,.85);
      text-decoration:none;
      font-weight: 700;
    }
    .tip a:hover{text-decoration:underline;}

    @media (max-width: 760px){
      .heroTop{padding:22px 18px 14px;}
      .panel{padding:16px 18px 18px;}
      .btnRow{grid-template-columns: 1fr 1fr; }
      .cards{grid-template-columns: 1fr; }
    }
  </style>
</head>
<body>
  <div class="wrap">
    <div class="hero">
      <div class="heroTop">
        <div>
          <h1 class="title">APEX<br/>Corporate Translator</h1>
          <p class="subtitle">
            Paste any corporate email / Slack / HR update. Get an <strong>APEX verdict</strong> in <strong>exactly 5 bullets</strong> with status + confidence.
          </p>
        </div>
        <div class="pill">APEX · Verdict Engine</div>
      </div>

      <div class="panel">
        <div class="inputBox">
          <textarea id="apexInput" placeholder="Paste corporate message here… (email / Slack / HR update)"></textarea>
        </div>

        <div class="btnRow">
          <button class="btn btnPrimary" id="apexTranslateBtn">APEX Translate</button>
          <button class="btn" id="apexExampleBtn">Load APEX Example</button>
          <button class="btn" id="apexCopyBtn">Copy Verdict</button>
          <button class="btn" id="apexResetBtn">Reset</button>
        </div>

        <div class="out" id="apexOut">
          <div class="outHead">
            <div class="outTitle">APEX Output</div>
            <div class="mini" id="apexMini">—</div>
          </div>

          <div class="cards">
            <div class="card">
              <div class="k">APEX Status</div>
              <div class="v"><span class="dot" id="apexDot"></span><span id="apexStatus">—</span></div>
            </div>
            <div class="card">
              <div class="k">APEX Confidence</div>
              <div class="v" id="apexConfidence">—</div>
            </div>
            <div class="card">
              <div class="k">APEX Signals</div>
              <div class="v" id="apexSignals">—</div>
            </div>
          </div>

          <div class="alert" id="apexAlert">
            Paste a message and run <strong>APEX Translate</strong>.
          </div>

          <div class="verdict">
            <div class="verdictHead">APEX Verdict (exactly 5 bullets)</div>
            <ul id="apexBullets">
              <li><span>—</span></li>
            </ul>
          </div>

          <div class="tip">
            Tip: corporate emails often hide the real move behind “alignment”, “streamline”, “flexibility”.
            <br/><a href="#" id="apexUseExampleLink">Use example</a>
          </div>
        </div>
      </div>
    </div>
  </div>

<script>
/* ================================
   APEX Corporate Translator Engine
   (Client-side, deterministic)
================================== */

const APEX_HARD_CRITICAL_PHRASES = [
  "roles will be eliminated",
  "role will be eliminated",
  "position eliminated",
  "positions eliminated",
  "headcount reduction",
  "reduce headcount",
  "reducing headcount",
  "layoff",
  "layoffs",
  "reducing workforce",
  "reduce workforce",
  "workforce reduction",
  "redundancy",
  "redundancies",
  "impacted employees will be contacted",
  "impacted employees",
  "severance",
  "separation package",
  "termination",
  "terminated",
  "let go",
  "job cuts",
  "eliminate roles"
];

// Weighted signal library (phrase -> weight)
const APEX_SIGNALS = [
  { phrase: "operating model", weight: 4 },
  { phrase: "organizational adjustments", weight: 4 },
  { phrase: "organizational changes", weight: 4 },
  { phrase: "restructure", weight: 4 },
  { phrase: "restructuring", weight: 4 },
  { phrase: "streamline", weight: 4 },
  { phrase: "realign", weight: 4 },
  { phrase: "realignment", weight: 4 },
  { phrase: "rightsizing", weight: 4 },
  { phrase: "cost reduction", weight: 4 },
  { phrase: "reduce costs", weight: 4 },
  { phrase: "optimize costs", weight: 3 },
  { phrase: "efficiency", weight: 3 },
  { phrase: "strategic priorities", weight: 2 },
  { phrase: "align our resources", weight: 3 },
  { phrase: "dynamic market", weight: 2 },
  { phrase: "business needs", weight: 2 },
  { phrase: "difficult decisions", weight: 3 },
  { phrase: "short-term flexibility", weight: 3 },
  { phrase: "changes may require", weight: 2 },
  { phrase: "over the coming weeks", weight: 2 },
  { phrase: "in the coming weeks", weight: 2 },
  { phrase: "as they become available", weight: 2 },
  { phrase: "additional details will be shared", weight: 3 },
  { phrase: "manager will share", weight: 2 },
  { phrase: "role impact", weight: 4 },
  { phrase: "role impacts", weight: 4 },
  { phrase: "impacted roles", weight: 4 },
  { phrase: "impacted employees", weight: 4 },
  { phrase: "hiring freeze", weight: 4 },
  { phrase: "pause hiring", weight: 3 },
  { phrase: "budget constraints", weight: 3 },
  { phrase: "team consolidation", weight: 4 },
  { phrase: "org consolidation", weight: 4 },
  { phrase: "reporting line", weight: 3 },
  { phrase: "reporting lines", weight: 3 }
];

// Thresholds
const APEX_THRESHOLDS = {
  criticalScore: 18,
  highScore: 10,
  watchScore: 4
};

// DOM
const apexInput = document.getElementById("apexInput");
const apexTranslateBtn = document.getElementById("apexTranslateBtn");
const apexExampleBtn = document.getElementById("apexExampleBtn");
const apexCopyBtn = document.getElementById("apexCopyBtn");
const apexResetBtn = document.getElementById("apexResetBtn");
const apexUseExampleLink = document.getElementById("apexUseExampleLink");

const apexMini = document.getElementById("apexMini");
const apexDot = document.getElementById("apexDot");
const apexStatus = document.getElementById("apexStatus");
const apexConfidence = document.getElementById("apexConfidence");
const apexSignals = document.getElementById("apexSignals");
const apexAlert = document.getElementById("apexAlert");
const apexBullets = document.getElementById("apexBullets");

const APEX_EXAMPLE = `Subject: Important Update on Our Operating Model

Team,
As we navigate a dynamic market environment, we've been evaluating opportunities to better align our resources with long-term strategic priorities.
Over the coming weeks, we will be implementing organizational adjustments designed to streamline workflows and improve cross-functional collaboration.
While these changes may require some short-term flexibility, we are confident they will position us strongly for sustainable growth.
Additional details will be shared by your managers as they become available.

Thank you for your continued commitment and adaptability.
Best regards,
Senior Leadership Team`;

function apexNormalize(text){
  return (text || "")
    .toLowerCase()
    .replace(/\s+/g, " ")
    .trim();
}

function apexExtractSubject(raw){
  const m = raw.match(/^\s*subject\s*:\s*(.+)$/im);
  if (!m) return null;
  return m[1].trim().slice(0, 120);
}

function apexHardCriticalHit(norm){
  return APEX_HARD_CRITICAL_PHRASES.find(p => norm.includes(p));
}

function apexScanSignals(norm){
  const hits = [];
  let score = 0;

  for (const s of APEX_SIGNALS){
    if (norm.includes(s.phrase)){
      hits.push(s);
      score += s.weight;
    }
  }

  return { hits, score };
}

function apexDecideStatus({hardHit, score, hitsCount}){
  // Hard override
  if (hardHit){
    return { status: "CRITICAL", confidence: "High" };
  }

  // Score-based
  if (score >= APEX_THRESHOLDS.criticalScore) return { status: "CRITICAL", confidence: "High" };
  if (score >= APEX_THRESHOLDS.highScore)     return { status: "HIGH", confidence: "Medium" };
  if (score >= APEX_THRESHOLDS.watchScore)    return { status: "WATCH", confidence: "Low" };

  // Also treat many weak hints as WATCH
  if (hitsCount >= 2) return { status: "WATCH", confidence: "Low" };

  return { status: "WATCH", confidence: "Low" };
}

function apexDotColor(status){
  if (status === "CRITICAL") return getComputedStyle(document.documentElement).getPropertyValue('--crit').trim();
  if (status === "HIGH") return getComputedStyle(document.documentElement).getPropertyValue('--warn').trim();
  return getComputedStyle(document.documentElement).getPropertyValue('--watch').trim();
}

/* ====== Bullet templates ====== */

// EXACTLY 5 bullets always, but content changes by status.
function apexBulletsWATCH(subjectLine){
  const head = subjectLine ? `Headline: “${subjectLine}” is informational; no structural change implied.` :
                             `Headline: This is informational; no structural change implied.`;
  return [
    head,
    "Core meaning: Routine operational notice; nothing points to reorg, layoffs, or scope shifts.",
    "Impact: No ownership/workflow changes expected based on this text alone.",
    "Risk: Low — treat as FYI unless new messages introduce change language.",
    "APEX move: Save it for context; escalate only if later emails mention reorg/cost cuts/role impact."
  ];
}

function apexBulletsHIGH(subjectLine){
  const head = subjectLine ? `Headline: “${subjectLine}” signals a likely change event.` :
                             `Headline: This message signals a likely change event.`;
  return [
    head,
    "Core move: Resource alignment / process reshaping (possible reporting-line or priority shifts).",
    "Next step: Manager-led meetings, scope clarification, and role mapping.",
    "Impact: Short-term ambiguity first; clarity later after decisions lock.",
    "APEX move: Ask 3 specifics: scope change, reporting line, and timeline for any role impact."
  ];
}

function apexBulletsCRITICAL(subjectLine, hardHit){
  const head = subjectLine ? `Headline: “${subjectLine}” is a CRITICAL change signal.` :
                             `Headline: This is a CRITICAL change signal.`;
  const core = hardHit
    ? `Core move: Explicit risk detected (“${hardHit}”) — treat as layoffs/reorg now.`
    : "Core move: Reorg / reporting-line changes likely; role impact is plausible.";
  return [
    head,
    core,
    "Next step: Decisions lock fast (1–6 weeks). Expect manager meetings and role mapping.",
    "Impact: Workflow disruption + uncertainty first; individual outcomes communicated later.",
    "APEX move: Ask today: (1) your scope, (2) your reporting line, (3) your role risk + timing. Document dates."
  ];
}

function apexAlertText(status, confidence, hitsCount, score){
  if (status === "CRITICAL"){
    return `APEX ALERT — Status: ${status} · Confidence: ${confidence} · Signals: ${hitsCount} (score ${score}) — Major change risk. Reorg and/or role impact possible. Act now.`;
  }
  if (status === "HIGH"){
    return `APEX ALERT — Status: ${status} · Confidence: ${confidence} · Signals: ${hitsCount} (score ${score}) — Change risk elevated. Clarify scope + reporting line.`;
  }
  // WATCH
  if (hitsCount === 0){
    return `APEX ALERT — Status: ${status} · Confidence: ${confidence} · Signals: None detected — Likely informational.`;
  }
  return `APEX ALERT — Status: ${status} · Confidence: ${confidence} · Signals: ${hitsCount} (score ${score}) — Low risk / monitor for escalation language.`;
}

function apexRender({status, confidence, hitsCount, score, subjectLine, hardHit}){
  apexStatus.textContent = status;
  apexConfidence.textContent = confidence;

  if (hitsCount === 0) apexSignals.textContent = `None`;
  else apexSignals.textContent = `${hitsCount} (score ${score})`;

  apexDot.style.background = apexDotColor(status);
  apexMini.textContent = `${status} · ${confidence} · signals ${hitsCount}`;

  apexAlert.textContent = apexAlertText(status, confidence, hitsCount, score);

  // Build EXACTLY 5 bullets depending on severity
  let bullets;
  if (status === "CRITICAL") bullets = apexBulletsCRITICAL(subjectLine, hardHit);
  else if (status === "HIGH") bullets = apexBulletsHIGH(subjectLine);
  else bullets = apexBulletsWATCH(subjectLine);

  // Render list
  apexBullets.innerHTML = "";
  bullets.slice(0,5).forEach(b => {
    const li = document.createElement("li");
    li.textContent = b;
    apexBullets.appendChild(li);
  });
}

function apexTranslate(){
  const raw = apexInput.value || "";
  const norm = apexNormalize(raw);

  if (!norm){
    apexAlert.innerHTML = `Paste a message and run <strong>APEX Translate</strong>.`;
    apexStatus.textContent = "—";
    apexConfidence.textContent = "—";
    apexSignals.textContent = "—";
    apexDot.style.background = apexDotColor("WATCH");
    apexMini.textContent = "—";
    apexBullets.innerHTML = `<li><span>—</span></li>`;
    return;
  }

  const subjectLine = apexExtractSubject(raw);
  const hardHit = apexHardCriticalHit(norm);

  const scan = apexScanSignals(norm);
  const hitsCount = scan.hits.length;
  const score = scan.score;

  const decision = apexDecideStatus({ hardHit, score, hitsCount });

  apexRender({
    status: decision.status,
    confidence: decision.confidence,
    hitsCount,
    score,
    subjectLine,
    hardHit
  });
}

function apexCopyVerdict(){
  const status = apexStatus.textContent;
  const conf = apexConfidence.textContent;
  const sig = apexSignals.textContent;

  const bullets = Array.from(apexBullets.querySelectorAll("li")).map(li => `- ${li.textContent}`);
  const text =
`APEX Corporate Translator — Verdict

Status: ${status}
Confidence: ${conf}
Signals: ${sig}

${bullets.join("\n")}
`;

  navigator.clipboard.writeText(text).then(() => {
    apexCopyBtn.textContent = "Copied";
    setTimeout(() => apexCopyBtn.textContent = "Copy Verdict", 900);
  }).catch(() => {
    apexCopyBtn.textContent = "Copy failed";
    setTimeout(() => apexCopyBtn.textContent = "Copy Verdict", 900);
  });
}

function apexReset(){
  apexInput.value = "";
  apexStatus.textContent = "—";
  apexConfidence.textContent = "—";
  apexSignals.textContent = "—";
  apexDot.style.background = apexDotColor("WATCH");
  apexMini.textContent = "—";
  apexAlert.innerHTML = `Paste a message and run <strong>APEX Translate</strong>.`;
  apexBullets.innerHTML = `<li><span>—</span></li>`;
}

// Wire
apexTranslateBtn.addEventListener("click", apexTranslate);
apexExampleBtn.addEventListener("click", () => { apexInput.value = APEX_EXAMPLE; apexTranslate(); });
apexUseExampleLink.addEventListener("click", (e) => { e.preventDefault(); apexInput.value = APEX_EXAMPLE; apexTranslate(); });
apexCopyBtn.addEventListener("click", apexCopyVerdict);
apexResetBtn.addEventListener("click", apexReset);

// First paint
apexReset();
</script>
</body>
</html>
